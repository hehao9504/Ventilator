name: Build Electron App for Windows

on:
  push:
    branches: [ main ]  # å¦‚æœä½ ä½¿ç”¨çš„æ˜¯ masterï¼Œè¯·æ”¹æˆ master

jobs:
  build:
    runs-on: windows-latest

    steps:
      - name: âœ… æ‰“å°å½“å‰è¿è¡Œå¹³å°
        run: echo "ğŸ RUNNER_OS = $RUNNER_OS"

      - name: ğŸ“¦ æ£€å‡ºä»£ç 
        uses: actions/checkout@v3

      - name: ğŸ”§ è®¾ç½® Node.js ç¯å¢ƒ
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - name: ğŸ“¦ å®‰è£…ä¾èµ–
        run: npm install

      - name: âš™ï¸ æ„å»ºå‰ç«¯ï¼ˆViteï¼‰
        run: npm run build

      - name: ğŸ—ï¸ æ„å»º Electron åº”ç”¨
        run: npm run electron:build

      - name: ğŸ“‚ æ˜¾ç¤ºæ„å»ºäº§ç‰©ï¼ˆç¡®è®¤ .exe æ˜¯å¦ç”Ÿæˆï¼‰
        run: dir dist_electron

      - name: ğŸ“¤ åˆ›å»º Release å¹¶ä¸Šä¼ å®‰è£…åŒ…
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        run: |
          gh release create v0.1 "dist_electron/Ventilator Setup 0.0.0.exe" --title "v0.1" --notes "è‡ªåŠ¨æ„å»ºå®‰è£…åŒ…"


